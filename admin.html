<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="noindex, nofollow, noarchive, nosnippet, noimageindex">
    <meta name="googlebot" content="noindex, nofollow">
    <meta name="bingbot" content="noindex, nofollow">
    <meta name="slurp" content="noindex, nofollow">
    <title>Panel Admin - Liens Telegram</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <!-- Protection : attendre le chargement des scripts -->
    <script>
        // Masquer le message de chargement une fois que requireAuth() a r√©ussi
        function hideLoadingMessage() {
            const loadingMsg = document.getElementById('loadingMessage');
            if (loadingMsg) {
                loadingMsg.style.display = 'none';
            }
        }
        
        // Exposer la fonction globalement
        window.hideLoadingMessage = hideLoadingMessage;
        
        // V√©rifier p√©riodiquement si les scripts sont charg√©s
        let checkInterval = setInterval(function() {
            // V√©rifier si requireAuth est disponible (scripts charg√©s)
            if (typeof requireAuth !== 'undefined') {
                clearInterval(checkInterval);
                // Les scripts sont charg√©s, admin.js va g√©rer l'authentification
                console.log('Scripts chiffr√©s charg√©s, authentification en cours...');
            }
        }, 100); // V√©rifier toutes les 100ms
        
        // Timeout de s√©curit√© : si les scripts ne se chargent pas apr√®s 15 secondes
        setTimeout(function() {
            clearInterval(checkInterval);
            
            if (typeof requireAuth === 'undefined') {
                console.error('Les scripts chiffr√©s ne se sont pas charg√©s correctement');
                const loadingMsg = document.getElementById('loadingMessage');
                if (loadingMsg) {
                    loadingMsg.innerHTML = '<div style="font-size: 24px;">‚ùå Erreur de chargement</div><div style="font-size: 14px; color: #888; margin-top: 10px;">Les fichiers chiffr√©s n\'ont pas pu √™tre charg√©s.<br>V√©rifiez que decrypt.js contient la bonne cl√© de chiffrement.<br><br><a href="index.html" style="color: #4a9eff; text-decoration: underline;">Retour √† l\'accueil</a></div>';
                }
            }
        }, 15000); // 15 secondes de timeout
    </script>
</head>
<body>
    <!-- Message de chargement pendant l'authentification -->
    <div id="loadingMessage" style="display: flex; justify-content: center; align-items: center; height: 100vh; background: #0a0a0a; color: #fff; font-family: 'Inter', sans-serif; flex-direction: column; gap: 20px;">
        <div style="font-size: 24px;">üîê V√©rification de l'authentification...</div>
        <div style="font-size: 14px; color: #888;">Redirection en cours si non autoris√©...</div>
    </div>
    
    <div class="container" style="display: none;">
        <header>
            <h1>‚öôÔ∏è Panel Admin</h1>
            <p class="subtitle">G√©rez vos liens Telegram et les liens sociaux</p>
            <div class="social-links">
                <a href="index.html" class="social-btn admin-btn">
                    <span>üè† Retour √† l'accueil</span>
                </a>
                <button onclick="logout()" class="social-btn logout-btn">
                    <span>üö™ D√©connexion</span>
                </button>
            </div>
        </header>

        <div class="admin-section">
            <h2>Ajouter un nouveau lien</h2>
            <form id="linkForm" class="link-form">
                <div class="form-group">
                    <label for="matchName">Nom du match / √âquipes</label>
                    <input type="text" id="matchName" placeholder="Ex: PSG vs Marseille" required>
                </div>
                <div class="form-group">
                    <label for="telegramLink">Lien Telegram</label>
                    <input type="url" id="telegramLink" placeholder="https://t.me/..." required>
                </div>
                <div class="form-group">
                    <label for="date">Date du match</label>
                    <input type="date" id="date" required>
                </div>
                <div class="form-group">
                    <label for="time">Heure du match</label>
                    <input type="time" id="time" required>
                </div>
                <div class="form-group">
                    <label for="competition">Comp√©tition</label>
                    <input type="text" id="competition" placeholder="Ex: Ligue 1, Champions League..." required>
                </div>
                <div class="form-group">
                    <label for="linkStatus">Statut du lien</label>
                    <select id="linkStatus" required>
                        <option value="active">üü¢ Actif (√† jour)</option>
                        <option value="dead">üî¥ Mort (lien ne fonctionne plus)</option>
                    </select>
                </div>
                <button type="submit" class="btn-primary">
                    <span>‚ûï Ajouter le lien</span>
                </button>
            </form>
        </div>

        <div class="admin-section">
            <h2>G√©rer les liens sociaux</h2>
            <form id="socialForm" class="link-form">
                <div class="form-group">
                    <label for="discordUrl">Lien Discord</label>
                    <input type="url" id="discordUrl" placeholder="https://discord.gg/...">
                </div>
                <div class="form-group">
                    <label for="xUrl">Lien X (Twitter)</label>
                    <input type="url" id="xUrl" placeholder="https://x.com/... ou https://twitter.com/...">
                </div>
                <button type="submit" class="btn-primary">
                    <span>üíæ Sauvegarder les liens sociaux</span>
                </button>
            </form>
        </div>

        <div class="admin-section">
            <div class="section-header">
                <h2>G√©rer les liens existants</h2>
                <div class="filter-buttons">
                    <button class="filter-btn active" data-filter="all">Tous</button>
                    <button class="filter-btn" data-filter="active">Actifs</button>
                    <button class="filter-btn" data-filter="dead">Morts</button>
                </div>
            </div>
            <div id="adminLinksList" class="links-list">
                <!-- Les liens seront ajout√©s ici dynamiquement -->
            </div>
            <div id="adminEmptyState" class="empty-state">
                <div class="empty-icon">üìã</div>
                <p>Aucun lien enregistr√© pour le moment</p>
            </div>
        </div>
    </div>

    <!-- D√©chiffreur (doit √™tre charg√© en premier) -->
    <script src="decrypt.js"></script>
    
    <!-- Fichiers chiffr√©s (seront d√©chiffr√©s automatiquement) -->
    <script data-enc="config.js.enc.js"></script>
    <script data-enc="protection.js.enc.js"></script>
    <script data-enc="auth.js.enc.js"></script>
    <script data-enc="common.js.enc.js"></script>
    <script data-enc="admin.js.enc.js"></script>
</body>
</html>

